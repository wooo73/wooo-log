# VPC(Virtual Private Cloud)

AWS에거 가상의 격리된 네트워크 공간을 만드는 기능

## 사용 사례

- 내부망 접근 제한(ex DB, Redis는 외부에서 못 보고 Lambda에서만 접근하게)
- 보안그룹으로 접근 제어 가능(포트, IP 제한)
- 서브넷을 구분해 인터넷 연결 여부 제어(Public / Private)

## VPC 구성도

```
            ┌────────────────────────────┐
            │         VPC (10.0.0.0/16)  │
            │                            │
            │   ┌──────────────┐         │
            │   │ Public Subnet│  10.0.1.0/24
            │   │              │         │
            │   │  ┌────────┐  │         │
Internet ◄──┼───┼─► NAT GW  │  │         │
            │   │  └────────┘  │         │
            │   └──────┬───────┘         │
            │          │                 │
            │   ┌──────▼──────┐          │
            │   │ Private Sub │  10.0.2.0/24
            │   │  (Lambda)   │          │
            │   └─────────────┘          │
            └────────────────────────────┘
```

- VPC
  - 전체 네트워크 공간(IP 대역 설정: 예 10.0.0.0/16
- 서브넷
  - VPC를 나눈 세부 네트워크 공간, public/private으로 구분
- 인터넷 게이트웨이(IGW)
  - 퍼블릭 서브넷이 외부 인터넷과 통신하게 해줌
- NAT Gateway
  - 프라이빗 서브넷 안의 리소스가 외부로 나가는 트래픽만 가능하게 해줌(들어오는 건 막음)
- 보안그룹
  - 인스턴스 단위의 가상 방화벽
  - EC2나 Lambda 등 각 인스턴스 레벨에서 접근 제어(방화벽)

### Subnet

- Public
  - 외부 인터넷과 연결 가능(인터넷 게이트웨이 존재)
- Private
  - 외부 인터넷과 단절. NAT Gateway를 통해서만 외부로 나감

### Security Group

- 특징

  - 허용 정책 기반

    - 특정 포트, 특정 IP만 허용하는 식으로 설정

  - 인바운드/아웃바운드

    - 각 방향마다 따로 설정 가능

  - 리소스 레벨

    - EC2, Lambda 등에 직접 붙임

예시: 인바운드: 3306 포트, 내 Lambda만 접근 가능 등
